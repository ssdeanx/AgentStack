{"numTotalTestSuites":74,"numPassedTestSuites":45,"numFailedTestSuites":29,"numPendingTestSuites":0,"numTotalTests":112,"numPassedTests":80,"numFailedTests":32,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1768131516201,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["app/api/chat/r - POST"],"fullName":"app/api/chat/r - POST returns 400 when messages missing","status":"passed","title":"returns 400 when messages missing","duration":6.326399999999921,"failureMessages":[],"meta":{}},{"ancestorTitles":["app/api/chat/r - POST"],"fullName":"app/api/chat/r - POST uses nested data.agentId when provided","status":"passed","title":"uses nested data.agentId when provided","duration":0.7880999999999858,"failureMessages":[],"meta":{}}],"startTime":1768131528153,"endTime":1768131528160.788,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/tests/api-chat-r.test.ts"},{"assertionResults":[],"startTime":1768131516201,"endTime":1768131516201,"status":"failed","message":"Cannot find module '../docs/hello-world.js'\nRequire stack:\n- C:\\Users\\ssdsk\\AgentStack\\tests\\docs-hello-world.test.ts","name":"C:/Users/ssdsk/AgentStack/tests/docs-hello-world.test.ts"},{"assertionResults":[{"ancestorTitles":["streamUtils","createSSEStream"],"fullName":"streamUtils createSSEStream should create a Response with correct SSE headers","status":"passed","title":"should create a Response with correct SSE headers","duration":6.008399999999938,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","createSSEStream"],"fullName":"streamUtils createSSEStream should call the callback with a controller","status":"passed","title":"should call the callback with a controller","duration":1.447400000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","createSSEStream"],"fullName":"streamUtils createSSEStream should send done event on completion","status":"passed","title":"should send done event on completion","duration":0.9217000000001008,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","createSSEStream"],"fullName":"streamUtils createSSEStream should handle errors gracefully","status":"passed","title":"should handle errors gracefully","duration":0.7824000000000524,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","streamProgressUpdate"],"fullName":"streamUtils streamProgressUpdate should encode progress update correctly","status":"passed","title":"should encode progress update correctly","duration":0.5908999999999196,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","streamProgressUpdate"],"fullName":"streamUtils streamProgressUpdate should handle different status values","status":"passed","title":"should handle different status values","duration":0.29090000000019245,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","streamJSONEvent"],"fullName":"streamUtils streamJSONEvent should encode JSON event correctly","status":"passed","title":"should encode JSON event correctly","duration":0.5815999999999804,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","streamJSONEvent"],"fullName":"streamUtils streamJSONEvent should handle arrays","status":"passed","title":"should handle arrays","duration":0.4034999999998945,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","streamJSONEvent"],"fullName":"streamUtils streamJSONEvent should handle primitive values","status":"passed","title":"should handle primitive values","duration":0.30399999999985994,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","handleTextStream"],"fullName":"streamUtils handleTextStream should handle text stream and return full text","status":"passed","title":"should handle text stream and return full text","duration":0.7108000000000629,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","handleTextStream"],"fullName":"streamUtils handleTextStream should encode each chunk correctly","status":"passed","title":"should encode each chunk correctly","duration":0.39859999999998763,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","handleTextStream"],"fullName":"streamUtils handleTextStream should handle multi-line chunks","status":"passed","title":"should handle multi-line chunks","duration":0.2944999999999709,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","handleTextStream"],"fullName":"streamUtils handleTextStream should handle empty stream","status":"passed","title":"should handle empty stream","duration":0.18780000000015207,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","handleTextStream"],"fullName":"streamUtils handleTextStream should handle stream with special characters","status":"passed","title":"should handle stream with special characters","duration":0.3485000000000582,"failureMessages":[],"meta":{}},{"ancestorTitles":["streamUtils","Integration tests"],"fullName":"streamUtils Integration tests should work together in a typical streaming workflow","status":"passed","title":"should work together in a typical streaming workflow","duration":0.9111000000000331,"failureMessages":[],"meta":{}}],"startTime":1768131526659,"endTime":1768131526673.9111,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/utils/streamUtils.test.ts"},{"assertionResults":[{"ancestorTitles":["Custom Scorers","sourceDiversityScorer"],"fullName":"Custom Scorers sourceDiversityScorer should score high for diverse sources","status":"passed","title":"should score high for diverse sources","duration":7.206500000000233,"failureMessages":[],"meta":{}},{"ancestorTitles":["Custom Scorers","sourceDiversityScorer"],"fullName":"Custom Scorers sourceDiversityScorer should score low and report issues for single-source dominance","status":"failed","title":"should score low and report issues for single-source dominance","duration":5.09900000000016,"failureMessages":["AssertionError: expected 1 to be less than 0.5\n    at C:/Users/ssdsk/AgentStack/src/mastra/agents/index.test.ts:26:25\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1768131524700,"endTime":1768131524712.099,"status":"failed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/agents/index.test.ts"},{"assertionResults":[{"ancestorTitles":["Completeness Scorer"],"fullName":"Completeness Scorer scores 1.0 when output contains all input terms","status":"passed","title":"scores 1.0 when output contains all input terms","duration":13.917099999999891,"failureMessages":[],"meta":{}},{"ancestorTitles":["Completeness Scorer"],"fullName":"Completeness Scorer scores 0 when none of the terms are present","status":"passed","title":"scores 0 when none of the terms are present","duration":4.0620000000001255,"failureMessages":[],"meta":{}}],"startTime":1768131527117,"endTime":1768131527135.062,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/evals/tests/completeness.test.ts"},{"assertionResults":[{"ancestorTitles":["Context Precision Scorer (MAP heuristic)"],"fullName":"Context Precision Scorer (MAP heuristic) gives high MAP when relevant items appear early","status":"passed","title":"gives high MAP when relevant items appear early","duration":11.069700000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["Context Precision Scorer (MAP heuristic)"],"fullName":"Context Precision Scorer (MAP heuristic) gives low MAP when relevant items are missing or late","status":"failed","title":"gives low MAP when relevant items are missing or late","duration":6.604399999999259,"failureMessages":["AssertionError: expected 0.8055555555555555 to be less than 0.7\n    at C:/Users/ssdsk/AgentStack/src/mastra/evals/tests/context-precision.test.ts:16:23\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1768131523649,"endTime":1768131523666.6045,"status":"failed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/evals/tests/context-precision.test.ts"},{"assertionResults":[{"ancestorTitles":["Context Relevance Scorer (heuristic)"],"fullName":"Context Relevance Scorer (heuristic) penalizes unused high relevance context","status":"passed","title":"penalizes unused high relevance context","duration":10.654299999999921,"failureMessages":[],"meta":{}}],"startTime":1768131528285,"endTime":1768131528295.6543,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/evals/tests/context-relevance.test.ts"},{"assertionResults":[{"ancestorTitles":["Keyword Coverage Scorer"],"fullName":"Keyword Coverage Scorer returns 1.0 when all required keywords are present in output","status":"passed","title":"returns 1.0 when all required keywords are present in output","duration":9.263799999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["Keyword Coverage Scorer"],"fullName":"Keyword Coverage Scorer returns 0 when none of the required keywords are present","status":"passed","title":"returns 0 when none of the required keywords are present","duration":1.0078000000000884,"failureMessages":[],"meta":{}}],"startTime":1768131528075,"endTime":1768131528086.0078,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/evals/tests/keyword-coverage.test.ts"},{"assertionResults":[{"ancestorTitles":["Noise Sensitivity (heuristic)"],"fullName":"Noise Sensitivity (heuristic) gives high score when output equals baseline","status":"passed","title":"gives high score when output equals baseline","duration":9.599300000000085,"failureMessages":[],"meta":{}},{"ancestorTitles":["Noise Sensitivity (heuristic)"],"fullName":"Noise Sensitivity (heuristic) gives lower score for different output","status":"passed","title":"gives lower score for different output","duration":1.2641000000000986,"failureMessages":[],"meta":{}}],"startTime":1768131528124,"endTime":1768131528135.2642,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/evals/tests/noise-sensitivity.test.ts"},{"assertionResults":[{"ancestorTitles":["Tone Consistency Scorer"],"fullName":"Tone Consistency Scorer scores close to 1 when tone is consistent","status":"passed","title":"scores close to 1 when tone is consistent","duration":9.20430000000033,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tone Consistency Scorer"],"fullName":"Tone Consistency Scorer scores lower when tone differs","status":"failed","title":"scores lower when tone differs","duration":6.935199999999895,"failureMessages":["AssertionError: expected 1 to be less than 0.9\n    at C:/Users/ssdsk/AgentStack/src/mastra/evals/tests/tone-consistency.test.ts:17:23\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1768131523648,"endTime":1768131523664.9353,"status":"failed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/evals/tests/tone-consistency.test.ts"},{"assertionResults":[{"ancestorTitles":["Tool Call Accuracy (Code)"],"fullName":"Tool Call Accuracy (Code) passes when expected tool is called","status":"passed","title":"passes when expected tool is called","duration":13.66319999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Tool Call Accuracy (Code)"],"fullName":"Tool Call Accuracy (Code) fails strict mode when multiple tools called","status":"passed","title":"fails strict mode when multiple tools called","duration":2.9846999999999753,"failureMessages":[],"meta":{}}],"startTime":1768131527991,"endTime":1768131528007.9846,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/evals/tests/tool-call-accuracy.test.ts"},{"assertionResults":[{"ancestorTitles":["alphaVantageCryptoTool","successful execution"],"fullName":"alphaVantageCryptoTool successful execution should fetch crypto intraday data successfully","status":"failed","title":"should fetch crypto intraday data successfully","duration":11.996100000000297,"failureMessages":["AssertionError: expected { …(7) } to deeply equal { …(7) }\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:111:37\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["alphaVantageCryptoTool","successful execution"],"fullName":"alphaVantageCryptoTool successful execution should fetch currency exchange rate successfully","status":"failed","title":"should fetch currency exchange rate successfully","duration":1.7069999999994252,"failureMessages":["AssertionError: expected undefined to deeply equal { …(1) }\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:168:33\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["alphaVantageCryptoTool","successful execution"],"fullName":"alphaVantageCryptoTool successful execution should use default market when not provided","status":"failed","title":"should use default market when not provided","duration":1.928899999999885,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ StringContaining \"market=USD\", …(1) ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   StringContaining \"market=USD\",\u001b[90m\n\u001b[32m-   Any<Object>,\u001b[90m\n\u001b[31m+   \"https://www.alphavantage.co/query?apikey=test-api-key&function=CRYPTO_DAILY&symbol=ETH&market=USD\",\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/ssdsk/AgentStack/node_modules/chai/index.js:1700:25)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:202:31\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["alphaVantageCryptoTool","successful execution"],"fullName":"alphaVantageCryptoTool successful execution should handle optional parameters correctly","status":"failed","title":"should handle optional parameters correctly","duration":1.232199999999466,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ …(2) ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[2m    \"https://www.alphavantage.co/query?apikey=test-api-key&function=CRYPTO_INTRADAY&symbol=BTC&market=EUR&interval=1min&outputsize=full&datatype=csv\",\u001b[22m\n\u001b[32m-   Any<Object>,\u001b[90m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/ssdsk/AgentStack/node_modules/chai/index.js:1700:25)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:237:31\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["alphaVantageCryptoTool","error handling"],"fullName":"alphaVantageCryptoTool error handling should throw error when API key is missing","status":"failed","title":"should throw error when API key is missing","duration":2.766799999999421,"failureMessages":["Error: promise resolved \"{ data: { data: 'test' }, …(1) }\" instead of rejecting\n    at _Assertion.__VITEST_REJECTS__ (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1675:17)\n    at _Assertion.propertyGetter (file:///C:/Users/ssdsk/AgentStack/node_modules/chai/index.js:1570:27)\n    at Reflect.get (<anonymous>)\n    at Object.proxyGetter [as get] (file:///C:/Users/ssdsk/AgentStack/node_modules/chai/index.js:1659:22)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:263:13\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1209:10)"],"meta":{}},{"ancestorTitles":["alphaVantageCryptoTool","error handling"],"fullName":"alphaVantageCryptoTool error handling should throw error when API key is empty","status":"passed","title":"should throw error when API key is empty","duration":1.3523999999997613,"failureMessages":[],"meta":{}},{"ancestorTitles":["alphaVantageCryptoTool","error handling"],"fullName":"alphaVantageCryptoTool error handling should handle network errors","status":"passed","title":"should handle network errors","duration":0.7353000000002794,"failureMessages":[],"meta":{}},{"ancestorTitles":["alphaVantageCryptoTool","error handling"],"fullName":"alphaVantageCryptoTool error handling should handle API HTTP errors","status":"passed","title":"should handle API HTTP errors","duration":0.44279999999980646,"failureMessages":[],"meta":{}},{"ancestorTitles":["alphaVantageCryptoTool","error handling"],"fullName":"alphaVantageCryptoTool error handling should handle API error messages","status":"passed","title":"should handle API error messages","duration":0.5765000000001237,"failureMessages":[],"meta":{}},{"ancestorTitles":["alphaVantageCryptoTool","error handling"],"fullName":"alphaVantageCryptoTool error handling should handle rate limit errors","status":"passed","title":"should handle rate limit errors","duration":0.6113000000004831,"failureMessages":[],"meta":{}},{"ancestorTitles":["alphaVantageCryptoTool","input validation"],"fullName":"alphaVantageCryptoTool input validation should validate required fields","status":"failed","title":"should validate required fields","duration":1.2746999999999389,"failureMessages":["Error: promise resolved \"{ error: true, …(2) }\" instead of rejecting\n    at _Assertion.__VITEST_REJECTS__ (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1675:17)\n    at _Assertion.propertyGetter (file:///C:/Users/ssdsk/AgentStack/node_modules/chai/index.js:1570:27)\n    at Reflect.get (<anonymous>)\n    at Object.proxyGetter [as get] (file:///C:/Users/ssdsk/AgentStack/node_modules/chai/index.js:1659:22)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:439:13\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1209:10)"],"meta":{}},{"ancestorTitles":["alphaVantageCryptoTool","input validation"],"fullName":"alphaVantageCryptoTool input validation should validate function enum values","status":"failed","title":"should validate function enum values","duration":1.1154000000005908,"failureMessages":["Error: promise resolved \"{ error: true, …(2) }\" instead of rejecting\n    at _Assertion.__VITEST_REJECTS__ (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1675:17)\n    at _Assertion.propertyGetter (file:///C:/Users/ssdsk/AgentStack/node_modules/chai/index.js:1570:27)\n    at Reflect.get (<anonymous>)\n    at Object.proxyGetter [as get] (file:///C:/Users/ssdsk/AgentStack/node_modules/chai/index.js:1659:22)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:458:13\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1209:10)"],"meta":{}},{"ancestorTitles":["alphaVantageCryptoTool","progress events"],"fullName":"alphaVantageCryptoTool progress events should emit progress events during execution","status":"failed","title":"should emit progress events during execution","duration":0.8859999999995125,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called 2 times, but got 3 times\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:489:39\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["alphaVantageStockTool","successful execution"],"fullName":"alphaVantageStockTool successful execution should fetch stock time series data successfully","status":"failed","title":"should fetch stock time series data successfully","duration":2.3583000000007814,"failureMessages":["AssertionError: expected { …(9) } to deeply equal { …(9) }\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:567:37\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["alphaVantageStockTool","successful execution"],"fullName":"alphaVantageStockTool successful execution should fetch technical indicators","status":"failed","title":"should fetch technical indicators","duration":1.1240999999999985,"failureMessages":["AssertionError: expected undefined to deeply equal { 'Meta Data': { …(7) }, …(1) }\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:621:33\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["alphaVantageStockTool","tracing"],"fullName":"alphaVantageStockTool tracing should create and manage tracing spans","status":"failed","title":"should create and manage tracing spans","duration":1.679399999999987,"failureMessages":["AssertionError: expected \"vi.fn()\" to be called with arguments: [ ObjectContaining{…} ]\u001b[90m\n\nReceived: \n\n\u001b[1m  1st vi.fn() call:\n\n\u001b[22m\u001b[2m  [\u001b[22m\n\u001b[32m-   ObjectContaining {\u001b[90m\n\u001b[32m-     \"input\": ObjectContaining {\u001b[90m\n\u001b[31m+   {\u001b[90m\n\u001b[31m+     \"input\": {\u001b[90m\n\u001b[2m        \"function\": \"GLOBAL_QUOTE\",\u001b[22m\n\u001b[2m        \"symbol\": \"AAPL\",\u001b[22m\n\u001b[2m      },\u001b[22m\n\u001b[32m-     \"metadata\": ObjectContaining {\u001b[90m\n\u001b[31m+     \"metadata\": {\u001b[90m\n\u001b[2m        \"tool.id\": \"alpha-vantage-stock\",\u001b[22m\n\u001b[2m        \"tool.input.function\": \"GLOBAL_QUOTE\",\u001b[22m\n\u001b[2m        \"tool.input.symbol\": \"AAPL\",\u001b[22m\n\u001b[2m      },\u001b[22m\n\u001b[2m      \"name\": \"alpha-vantage-stock-fetch\",\u001b[22m\n\u001b[32m-     \"type\": StringContaining \"TOOL_CALL\",\u001b[90m\n\u001b[31m+     \"type\": \"tool_call\",\u001b[90m\n\u001b[2m    },\u001b[22m\n\u001b[2m  ]\u001b[22m\n\u001b[39m\u001b[90m\n\nNumber of calls: \u001b[1m1\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/ssdsk/AgentStack/node_modules/chai/index.js:1700:25)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:665:15\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["alphaVantageTool (legacy)"],"fullName":"alphaVantageTool (legacy) should fetch general financial data successfully","status":"failed","title":"should fetch general financial data successfully","duration":1.9345000000002983,"failureMessages":["AssertionError: expected { data: 'test' } to deeply equal { 'Meta Data': { …(5) }, …(1) }\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:733:29\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["alphaVantageTool (legacy)"],"fullName":"alphaVantageTool (legacy) should handle economic indicators","status":"failed","title":"should handle economic indicators","duration":1.0679000000000087,"failureMessages":["AssertionError: expected { 'Meta Data': { …(5) }, …(1) } to deeply equal { data: [ { …(2) } ] }\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:775:29\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["lifecycle hooks"],"fullName":"lifecycle hooks should call onInputStart hook","status":"failed","title":"should call onInputStart hook","duration":0.831000000000131,"failureMessages":["AssertionError: expected \"info\" to be called with arguments: [ …(2) ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/ssdsk/AgentStack/node_modules/chai/index.js:1700:25)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:808:24\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["lifecycle hooks"],"fullName":"lifecycle hooks should call onInputAvailable hook","status":"failed","title":"should call onInputAvailable hook","duration":0.6109999999998763,"failureMessages":["AssertionError: expected \"info\" to be called with arguments: [ …(2) ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/ssdsk/AgentStack/node_modules/chai/index.js:1700:25)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:844:24\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["lifecycle hooks"],"fullName":"lifecycle hooks should call onOutput hook","status":"failed","title":"should call onOutput hook","duration":0.5133999999998196,"failureMessages":["AssertionError: expected \"info\" to be called with arguments: [ …(2) ]\u001b[90m\n\nNumber of calls: \u001b[1m0\u001b[22m\n\u001b[39m\n    at Proxy.<anonymous> (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1420:10)\n    at Proxy.<anonymous> (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/expect/dist/index.js:1090:14)\n    at Proxy.methodWrapper (file:///C:/Users/ssdsk/AgentStack/node_modules/chai/index.js:1700:25)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts:882:24\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1768131524449,"endTime":1768131524486.611,"status":"failed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/alpha-vantage.tool.test.ts"},{"assertionResults":[{"ancestorTitles":["chartJsTool integration (decimation)"],"fullName":"chartJsTool integration (decimation) decimates large datasets via downsample tool","status":"passed","title":"decimates large datasets via downsample tool","duration":44.02109999999993,"failureMessages":[],"meta":{}}],"startTime":1768131526316,"endTime":1768131526360.021,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/chartjs.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["csvToJsonTool"],"fullName":"csvToJsonTool should convert CSV string to JSON successfully","status":"passed","title":"should convert CSV string to JSON successfully","duration":9.035899999999856,"failureMessages":[],"meta":{}},{"ancestorTitles":["csvToJsonTool"],"fullName":"csvToJsonTool should handle CSV with custom delimiter","status":"passed","title":"should handle CSV with custom delimiter","duration":1.455699999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["csvToJsonTool"],"fullName":"csvToJsonTool should emit progress events","status":"passed","title":"should emit progress events","duration":3.0912000000000717,"failureMessages":[],"meta":{}},{"ancestorTitles":["csvToJsonTool"],"fullName":"csvToJsonTool should throw error when no CSV data or file path provided","status":"passed","title":"should throw error when no CSV data or file path provided","duration":1.9402999999999793,"failureMessages":[],"meta":{}},{"ancestorTitles":["csvToJsonTool"],"fullName":"csvToJsonTool should handle abort signal","status":"passed","title":"should handle abort signal","duration":0.6179000000001906,"failureMessages":[],"meta":{}},{"ancestorTitles":["csvToJsonTool"],"fullName":"csvToJsonTool should create tracing span with correct metadata","status":"passed","title":"should create tracing span with correct metadata","duration":1.096599999999853,"failureMessages":[],"meta":{}}],"startTime":1768131526773,"endTime":1768131526791.0967,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/csv-to-json.tool.test.ts"},{"assertionResults":[{"ancestorTitles":["dataValidatorToolJSON"],"fullName":"dataValidatorToolJSON validates valid data against schema","status":"passed","title":"validates valid data against schema","duration":5.6737000000000535,"failureMessages":[],"meta":{}},{"ancestorTitles":["dataValidatorToolJSON"],"fullName":"dataValidatorToolJSON rejects data missing required fields","status":"passed","title":"rejects data missing required fields","duration":1.8098999999999705,"failureMessages":[],"meta":{}},{"ancestorTitles":["dataValidatorToolJSON"],"fullName":"dataValidatorToolJSON validates array type","status":"passed","title":"validates array type","duration":0.5626999999999498,"failureMessages":[],"meta":{}},{"ancestorTitles":["dataValidatorToolJSON"],"fullName":"dataValidatorToolJSON rejects invalid array items","status":"passed","title":"rejects invalid array items","duration":0.6924000000001342,"failureMessages":[],"meta":{}},{"ancestorTitles":["dataValidatorToolJSON"],"fullName":"dataValidatorToolJSON validates nested objects","status":"passed","title":"validates nested objects","duration":1.016800000000103,"failureMessages":[],"meta":{}},{"ancestorTitles":["dataValidatorToolJSON"],"fullName":"dataValidatorToolJSON validates type constraints","status":"passed","title":"validates type constraints","duration":4.132800000000088,"failureMessages":[],"meta":{}},{"ancestorTitles":["dataValidatorToolJSON"],"fullName":"dataValidatorToolJSON handles null or undefined data","status":"passed","title":"handles null or undefined data","duration":0.7885999999998603,"failureMessages":[],"meta":{}}],"startTime":1768131527517,"endTime":1768131527531.7886,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/data-validator.tool.test.ts"},{"assertionResults":[{"ancestorTitles":["downsampleTool"],"fullName":"downsampleTool returns full series when target >= length","status":"passed","title":"returns full series when target >= length","duration":5.313099999999849,"failureMessages":[],"meta":{}},{"ancestorTitles":["downsampleTool"],"fullName":"downsampleTool downsamples to target points using lttb","status":"passed","title":"downsamples to target points using lttb","duration":8.235000000000127,"failureMessages":[],"meta":{}},{"ancestorTitles":["downsampleTool"],"fullName":"downsampleTool downsamples with min-max preserving peaks","status":"passed","title":"downsamples with min-max preserving peaks","duration":1.4347000000000207,"failureMessages":[],"meta":{}},{"ancestorTitles":["downsampleTool"],"fullName":"downsampleTool downsamples with m4 preserving edges","status":"passed","title":"downsamples with m4 preserving edges","duration":1.2509999999999764,"failureMessages":[],"meta":{}}],"startTime":1768131526298,"endTime":1768131526314.251,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/downsample.tool.test.ts"},{"assertionResults":[{"ancestorTitles":["jsonToCsvTool"],"fullName":"jsonToCsvTool converts simple JSON array to CSV","status":"passed","title":"converts simple JSON array to CSV","duration":5.792900000000145,"failureMessages":[],"meta":{}},{"ancestorTitles":["jsonToCsvTool"],"fullName":"jsonToCsvTool handles custom delimiters","status":"passed","title":"handles custom delimiters","duration":0.901299999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["jsonToCsvTool"],"fullName":"jsonToCsvTool handles empty array","status":"passed","title":"handles empty array","duration":0.3914999999999509,"failureMessages":[],"meta":{}},{"ancestorTitles":["jsonToCsvTool"],"fullName":"jsonToCsvTool handles single object","status":"passed","title":"handles single object","duration":0.4934000000000651,"failureMessages":[],"meta":{}},{"ancestorTitles":["jsonToCsvTool"],"fullName":"jsonToCsvTool handles objects with different keys","status":"passed","title":"handles objects with different keys","duration":0.45820000000003347,"failureMessages":[],"meta":{}},{"ancestorTitles":["jsonToCsvTool"],"fullName":"jsonToCsvTool handles nested objects as stringified JSON","status":"passed","title":"handles nested objects as stringified JSON","duration":0.32539999999994507,"failureMessages":[],"meta":{}},{"ancestorTitles":["jsonToCsvTool"],"fullName":"jsonToCsvTool handles special characters in values","status":"passed","title":"handles special characters in values","duration":0.30369999999993524,"failureMessages":[],"meta":{}}],"startTime":1768131527875,"endTime":1768131527884.3037,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/json-to-csv.tool.test.ts"},{"assertionResults":[{"ancestorTitles":["jwtAuthTool"],"fullName":"jwtAuthTool should return mock user data when JWT is provided","status":"passed","title":"should return mock user data when JWT is provided","duration":6.870799999999917,"failureMessages":[],"meta":{}},{"ancestorTitles":["jwtAuthTool"],"fullName":"jwtAuthTool should throw error when JWT is not found in context","status":"passed","title":"should throw error when JWT is not found in context","duration":2.31919999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["jwtAuthTool"],"fullName":"jwtAuthTool should handle abort signal","status":"passed","title":"should handle abort signal","duration":0.8097000000000207,"failureMessages":[],"meta":{}},{"ancestorTitles":["jwtAuthTool"],"fullName":"jwtAuthTool should create tracing span with correct metadata","status":"passed","title":"should create tracing span with correct metadata","duration":3.7521999999999025,"failureMessages":[],"meta":{}},{"ancestorTitles":["jwtAuthTool"],"fullName":"jwtAuthTool should emit progress events","status":"passed","title":"should emit progress events","duration":0.7980000000000018,"failureMessages":[],"meta":{}}],"startTime":1768131526459,"endTime":1768131526473.798,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/jwt-auth.tool.test.ts"},{"assertionResults":[{"ancestorTitles":["googleSearchTool"],"fullName":"googleSearchTool returns search results for valid query","status":"failed","title":"returns search results for valid query","duration":18.79689999999937,"failureMessages":["AssertionError: expected undefined to be defined\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/serpapi-search.tool.test.ts:58:39\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["googleSearchTool"],"fullName":"googleSearchTool handles empty results","status":"passed","title":"handles empty results","duration":2.3549000000002707,"failureMessages":[],"meta":{}},{"ancestorTitles":["googleSearchTool"],"fullName":"googleSearchTool passes location parameter to API","status":"passed","title":"passes location parameter to API","duration":3.5051000000003114,"failureMessages":[],"meta":{}},{"ancestorTitles":["googleSearchTool"],"fullName":"googleSearchTool passes language parameter to API","status":"passed","title":"passes language parameter to API","duration":1.3563000000012835,"failureMessages":[],"meta":{}},{"ancestorTitles":["googleSearchTool"],"fullName":"googleSearchTool passes device parameter to API","status":"passed","title":"passes device parameter to API","duration":1.2548999999999069,"failureMessages":[],"meta":{}}],"startTime":1768131524766,"endTime":1768131524794.255,"status":"failed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/serpapi-search.tool.test.ts"},{"assertionResults":[],"startTime":1768131516201,"endTime":1768131516201,"status":"failed","message":"Failed to resolve import \"./serpapi-config\" from \"src/mastra/tools/tests/serpapi-shopping.tool.test.ts\". Does the file exist?","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/serpapi-shopping.tool.test.ts"},{"assertionResults":[{"ancestorTitles":["spatialIndexTool"],"fullName":"spatialIndexTool builds and searches index","status":"passed","title":"builds and searches index","duration":5.473199999999906,"failureMessages":[],"meta":{}}],"startTime":1768131528392,"endTime":1768131528397.4731,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/spatial-index.tool.test.ts"},{"assertionResults":[{"ancestorTitles":["weatherTool"],"fullName":"weatherTool returns weather data for valid location","status":"passed","title":"returns weather data for valid location","duration":11.649899999999889,"failureMessages":[],"meta":{}},{"ancestorTitles":["weatherTool"],"fullName":"weatherTool returns weather data for single word location","status":"passed","title":"returns weather data for single word location","duration":1.3221000000000913,"failureMessages":[],"meta":{}},{"ancestorTitles":["weatherTool"],"fullName":"weatherTool throws error when location not found","status":"passed","title":"throws error when location not found","duration":2.91820000000007,"failureMessages":[],"meta":{}}],"startTime":1768131526313,"endTime":1768131526328.9182,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/weather-tool.test.ts"},{"assertionResults":[{"ancestorTitles":["webScraperTool","successful scraping"],"fullName":"webScraperTool successful scraping should scrape a simple webpage successfully","status":"failed","title":"should scrape a simple webpage successfully","duration":11.158699999999953,"failureMessages":["TypeError: () => mockCrawler is not a constructor\n    at new Mock (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/spy/dist/index.js:262:27)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:762:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:170:28\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","successful scraping"],"fullName":"webScraperTool successful scraping should handle metadata extraction","status":"failed","title":"should handle metadata extraction","duration":2.0596000000005006,"failureMessages":["TypeError: () => mockCrawler is not a constructor\n    at new Mock (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/spy/dist/index.js:262:27)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:762:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:223:28\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","successful scraping"],"fullName":"webScraperTool successful scraping should save markdown content when requested","status":"failed","title":"should save markdown content when requested","duration":1.282100000000355,"failureMessages":["TypeError: () => mockCrawler is not a constructor\n    at new Mock (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/spy/dist/index.js:262:27)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:762:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:245:28\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","error handling"],"fullName":"webScraperTool error handling should reject URLs not in allowlist","status":"failed","title":"should reject URLs not in allowlist","duration":0.8200999999990017,"failureMessages":["ScrapingError: Domain is not allowlisted for scraping: https://blocked-domain.com/test (code=DOMAIN_NOT_ALLOWED)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:693:13)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:30)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:265:49\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/ssdsk/AgentStack/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)"],"meta":{}},{"ancestorTitles":["webScraperTool","error handling"],"fullName":"webScraperTool error handling should handle invalid URLs","status":"failed","title":"should handle invalid URLs","duration":5.472800000001371,"failureMessages":["AssertionError: expected undefined to be 'failed' // Object.is equality\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:289:35\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","error handling"],"fullName":"webScraperTool error handling should handle crawler failures","status":"failed","title":"should handle crawler failures","duration":1.007499999999709,"failureMessages":["TypeError: () => mockCrawler is not a constructor\n    at new Mock (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/spy/dist/index.js:262:27)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:762:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:299:28\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","error handling"],"fullName":"webScraperTool error handling should handle file system errors during save","status":"failed","title":"should handle file system errors during save","duration":1.2241000000012718,"failureMessages":["TypeError: () => mockCrawler is not a constructor\n    at new Mock (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/spy/dist/index.js:262:27)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:762:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:320:28\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","error handling"],"fullName":"webScraperTool error handling should update spans on completion","status":"failed","title":"should update spans on completion","duration":1.0836999999992258,"failureMessages":["TypeError: () => mockCrawler is not a constructor\n    at new Mock (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/spy/dist/index.js:262:27)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:762:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:337:13\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","error handling"],"fullName":"webScraperTool error handling should handle tracing errors gracefully","status":"failed","title":"should handle tracing errors gracefully","duration":0.8296000000009371,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'value')\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:353:22\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:145:11\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:26\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1243:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1209:10)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1653:37\n    at Traces.$ (file:///C:/Users/ssdsk/AgentStack/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)\n    at trace (file:///C:/Users/ssdsk/AgentStack/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)\n    at runTest (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:1653:12)"],"meta":{}},{"ancestorTitles":["webScraperTool","progress reporting"],"fullName":"webScraperTool progress reporting should emit progress events during scraping","status":"failed","title":"should emit progress events during scraping","duration":1.0372999999999593,"failureMessages":["TypeError: () => mockCrawler is not a constructor\n    at new Mock (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/spy/dist/index.js:262:27)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:762:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:378:13\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","HTML sanitization"],"fullName":"webScraperTool HTML sanitization should sanitize dangerous HTML elements","status":"failed","title":"should sanitize dangerous HTML elements","duration":0.8117999999994936,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'rawContent')\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:419:35\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","lifecycle hooks"],"fullName":"webScraperTool lifecycle hooks should call lifecycle hooks appropriately","status":"failed","title":"should call lifecycle hooks appropriately","duration":0.800600000000486,"failureMessages":["TypeError: () => mockCrawler is not a constructor\n    at new Mock (file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/spy/dist/index.js:262:27)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:762:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:430:13\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1768131524735,"endTime":1768131524763.8005,"status":"failed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts"},{"assertionResults":[{"ancestorTitles":["FinancialQuoteCard"],"fullName":"FinancialQuoteCard renders stock symbol and price correctly","status":"passed","title":"renders stock symbol and price correctly","duration":52.571699999999964,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinancialQuoteCard"],"fullName":"FinancialQuoteCard renders loading state when output is missing","status":"passed","title":"renders loading state when output is missing","duration":4.669300000000021,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinancialQuoteCard"],"fullName":"FinancialQuoteCard renders error state","status":"passed","title":"renders error state","duration":5.72629999999981,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinancialChart"],"fullName":"FinancialChart renders line chart with data","status":"passed","title":"renders line chart with data","duration":7.712500000000091,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompanyProfileCard"],"fullName":"CompanyProfileCard renders company profile correctly","status":"passed","title":"renders company profile correctly","duration":13.447200000000066,"failureMessages":[],"meta":{}}],"startTime":1768131525880,"endTime":1768131525964.4473,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/components/ai-elements/tools/__tests__/financial-tools.test.tsx"},{"assertionResults":[{"ancestorTitles":["CommitHistoryList"],"fullName":"CommitHistoryList renders commit history","status":"passed","title":"renders commit history","duration":127.47379999999976,"failureMessages":[],"meta":{}}],"startTime":1768131525096,"endTime":1768131525223.4739,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/components/ai-elements/tools/__tests__/github-tools.test.tsx"},{"assertionResults":[{"ancestorTitles":["NewsCarousel"],"fullName":"NewsCarousel renders news items","status":"passed","title":"renders news items","duration":95.27340000000004,"failureMessages":[],"meta":{}}],"startTime":1768131525072,"endTime":1768131525167.2734,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/components/ai-elements/tools/__tests__/research-tools.test.tsx"},{"assertionResults":[{"ancestorTitles":["ForecastView"],"fullName":"ForecastView renders forecast rows","status":"passed","title":"renders forecast rows","duration":88.57780000000002,"failureMessages":[],"meta":{}}],"startTime":1768131525311,"endTime":1768131525399.578,"status":"passed","message":"","name":"C:/Users/ssdsk/AgentStack/src/components/ai-elements/tools/__tests__/weather-tool.test.tsx"}]}