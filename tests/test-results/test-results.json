{"numTotalTestSuites":7,"numPassedTestSuites":0,"numFailedTestSuites":7,"numPendingTestSuites":0,"numTotalTests":12,"numPassedTests":2,"numFailedTests":10,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1768151620513,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["webScraperTool","successful scraping"],"fullName":"webScraperTool successful scraping should scrape a simple webpage successfully","status":"failed","title":"should scrape a simple webpage successfully","duration":18.253900000000158,"failureMessages":["ScrapingError: Request handler failed: (html) => {\n      return {\n        window: {\n          document: {\n            body: { innerHTML: html },\n     ...<omitted>... } is not a constructor (code=REQUEST_HANDLER_ERROR)\n    at Object.requestHandler (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1138:19)\n    at MockCheerioCrawler.run (C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:151:44)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1183:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:206:28\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","successful scraping"],"fullName":"webScraperTool successful scraping should handle metadata extraction","status":"failed","title":"should handle metadata extraction","duration":2.3532000000000153,"failureMessages":["ScrapingError: Request handler failed: (html) => {\n      return {\n        window: {\n          document: {\n            body: { innerHTML: html },\n     ...<omitted>... } is not a constructor (code=REQUEST_HANDLER_ERROR)\n    at Object.requestHandler (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1138:19)\n    at MockCheerioCrawler.run (C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:151:44)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1183:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:264:28\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","successful scraping"],"fullName":"webScraperTool successful scraping should save markdown content when requested","status":"failed","title":"should save markdown content when requested","duration":2.2521999999999025,"failureMessages":["ScrapingError: Request handler failed: (html) => {\n      return {\n        window: {\n          document: {\n            body: { innerHTML: html },\n     ...<omitted>... } is not a constructor (code=REQUEST_HANDLER_ERROR)\n    at Object.requestHandler (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1138:19)\n    at MockCheerioCrawler.run (C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:151:44)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1183:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:286:28\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","error handling"],"fullName":"webScraperTool error handling should return error for URLs not in allowlist","status":"passed","title":"should return error for URLs not in allowlist","duration":0.9435000000000855,"failureMessages":[],"meta":{}},{"ancestorTitles":["webScraperTool","error handling"],"fullName":"webScraperTool error handling should handle invalid URLs","status":"passed","title":"should handle invalid URLs","duration":1.540899999999965,"failureMessages":[],"meta":{}},{"ancestorTitles":["webScraperTool","error handling"],"fullName":"webScraperTool error handling should handle crawler failures","status":"failed","title":"should handle crawler failures","duration":3.1851999999998952,"failureMessages":["AssertionError: expected 'ScrapingError: Request handler failedâ€¦' to match /Network timeout|Web scraping failed/\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:375:35\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","error handling"],"fullName":"webScraperTool error handling should handle file system errors during save","status":"failed","title":"should handle file system errors during save","duration":1.4662000000000717,"failureMessages":["ScrapingError: Request handler failed: (html) => {\n      return {\n        window: {\n          document: {\n            body: { innerHTML: html },\n     ...<omitted>... } is not a constructor (code=REQUEST_HANDLER_ERROR)\n    at Object.requestHandler (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1138:19)\n    at MockCheerioCrawler.run (C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:151:44)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1183:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:390:28\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","error handling"],"fullName":"webScraperTool error handling should update spans on completion","status":"failed","title":"should update spans on completion","duration":1.2029999999999745,"failureMessages":["ScrapingError: Request handler failed: (html) => {\n      return {\n        window: {\n          document: {\n            body: { innerHTML: html },\n     ...<omitted>... } is not a constructor (code=REQUEST_HANDLER_ERROR)\n    at Object.requestHandler (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1138:19)\n    at MockCheerioCrawler.run (C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:151:44)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1183:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:407:13\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","error handling"],"fullName":"webScraperTool error handling should handle tracing errors gracefully","status":"failed","title":"should handle tracing errors gracefully","duration":1.3597999999999502,"failureMessages":["ScrapingError: Request handler failed: (html) => {\n      return {\n        window: {\n          document: {\n            body: { innerHTML: html },\n     ...<omitted>... } is not a constructor (code=REQUEST_HANDLER_ERROR)\n    at Object.requestHandler (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1138:19)\n    at MockCheerioCrawler.run (C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:151:44)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1183:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:443:28\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","progress reporting"],"fullName":"webScraperTool progress reporting should emit progress events during scraping","status":"failed","title":"should emit progress events during scraping","duration":1.2157999999999447,"failureMessages":["ScrapingError: Request handler failed: (html) => {\n      return {\n        window: {\n          document: {\n            body: { innerHTML: html },\n     ...<omitted>... } is not a constructor (code=REQUEST_HANDLER_ERROR)\n    at Object.requestHandler (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1138:19)\n    at MockCheerioCrawler.run (C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:151:44)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1183:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:459:13\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","HTML sanitization"],"fullName":"webScraperTool HTML sanitization should sanitize dangerous HTML elements","status":"failed","title":"should sanitize dangerous HTML elements","duration":1.1749999999999545,"failureMessages":["ScrapingError: Request handler failed: (html) => {\n      return {\n        window: {\n          document: {\n            body: { innerHTML: html },\n     ...<omitted>... } is not a constructor (code=REQUEST_HANDLER_ERROR)\n    at Object.requestHandler (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1138:19)\n    at MockCheerioCrawler.run (C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:151:44)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1183:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:493:28\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}},{"ancestorTitles":["webScraperTool","lifecycle hooks"],"fullName":"webScraperTool lifecycle hooks should call lifecycle hooks appropriately","status":"failed","title":"should call lifecycle hooks appropriately","duration":1.1876999999999498,"failureMessages":["ScrapingError: Request handler failed: (html) => {\n      return {\n        window: {\n          document: {\n            body: { innerHTML: html },\n     ...<omitted>... } is not a constructor (code=REQUEST_HANDLER_ERROR)\n    at Object.requestHandler (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1138:19)\n    at MockCheerioCrawler.run (C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:151:44)\n    at execute (C:/Users/ssdsk/AgentStack/src/mastra/tools/web-scraper-tool.ts:1183:23)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at Tool.execute (file:///C:/Users/ssdsk/AgentStack/node_modules/@mastra/core/dist/chunk-KGE3KAM7.js:268:24)\n    at C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts:513:13\n    at file:///C:/Users/ssdsk/AgentStack/node_modules/@vitest/runner/dist/index.js:915:20"],"meta":{}}],"startTime":1768151659882,"endTime":1768151659919.1877,"status":"failed","message":"","name":"C:/Users/ssdsk/AgentStack/src/mastra/tools/tests/web-scraper-tool.test.ts"}]}